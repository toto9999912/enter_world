# Unity ARPG éŠæˆ² - Enter World

> **å°ˆæ¡ˆç‹€æ…‹**: é–‹ç™¼ä¸­ | **Unity ç‰ˆæœ¬**: 2022.3+ | **æœ€å¾Œæ›´æ–°**: 2025-10-04

ä¸€æ¬¾ä½¿ç”¨ Unity é–‹ç™¼çš„ 2D ARPG éŠæˆ²,å…·å‚™å®Œæ•´çš„å±¬æ€§ç³»çµ±ã€æˆ°é¬¥ç³»çµ±ã€çœ·å±¬ç³»çµ±ã€æŠ€èƒ½å¤©è³¦ç³»çµ±ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ“– ç›®éŒ„

- [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [éŠæˆ²ç³»çµ±è©³è§£](#éŠæˆ²ç³»çµ±è©³è§£)
- [é–‹ç™¼æŒ‡å—](#é–‹ç™¼æŒ‡å—)
- [æ›´æ–°æ—¥èªŒ](#æ›´æ–°æ—¥èªŒ)

---

## ğŸ® å°ˆæ¡ˆæ¦‚è¿°

### éŠæˆ²ç‰¹è‰²

- **æ·±åº¦å±¬æ€§ç³»çµ±**: 15+ ç¨®è§’è‰²å±¬æ€§,æ”¯æ´è¤‡é›œçš„åŠ æˆè¨ˆç®—
- **å…ƒç´ å…‹åˆ¶ç³»çµ±**: 8 å¤§å…ƒç´ ç›¸äº’å…‹åˆ¶,ç­–ç•¥æ€§æˆ°é¬¥
- **çœ·å±¬æ”¶é›†**: æ•æ‰ä¸¦åŸ¹é¤Šçœ·å±¬,çµ„å»ºæœ€å¼·éšŠä¼
- **æŠ€èƒ½å¤©è³¦æ¨¹**: è±å¯Œçš„æŠ€èƒ½å’Œå¤©è³¦é¸æ“‡,æ‰“é€ ç¨ç‰¹è§’è‰²
- **è£å‚™å¼·åŒ–**: è£å‚™å¼·åŒ–ã€å¥—è£ç³»çµ±ã€éš±è—å±¬æ€§
- **è‡ªå‹•å­˜æª”**: å®Œæ•´çš„å­˜æª”ç³»çµ±,æ”¯æ´å¤šæ§½ä½å’Œè‡ªå‹•å­˜æª”

### æŠ€è¡“ç‰¹è‰²

- **æœå‹™å°å‘æ¶æ§‹**: ä½¿ç”¨ ServiceLocator ç®¡ç†å…¨åŸŸæœå‹™
- **äº‹ä»¶é©…å‹•é€šè¨Š**: é€é EventBus å¯¦ç¾ç³»çµ±è§£è€¦
- **è³‡æ–™é©…å‹•è¨­è¨ˆ**: ScriptableObject ä½œç‚ºè³‡æ–™å®¹å™¨
- **ç‰©ä»¶æ± å„ªåŒ–**: æ¸›å°‘ GC å£“åŠ›,æå‡é‹è¡Œæ•ˆèƒ½
- **ç‹€æ…‹æ©Ÿæ¨¡å¼**: æ¸…æ™°çš„ AI å’ŒéŠæˆ²ç‹€æ…‹ç®¡ç†

---

## âœ… æ ¸å¿ƒåŠŸèƒ½

### å·²å®Œæˆç³»çµ± (12/14 - 85.7%)

#### ğŸ¯ æ ¸å¿ƒæ¶æ§‹
- âœ… **ServiceLocator** - æœå‹™å®šä½å™¨,çµ±ä¸€ç®¡ç†éŠæˆ²æœå‹™
- âœ… **EventBus** - äº‹ä»¶ç¸½ç·š,è§£è€¦ç³»çµ±é–“é€šè¨Š
- âœ… **ObjectPool** - ç‰©ä»¶æ± ,å„ªåŒ–æ€§èƒ½
- âœ… **StateMachine** - ç‹€æ…‹æ©Ÿ,ç®¡ç†è¤‡é›œé‚è¼¯

#### ğŸ“Š éŠæˆ²ç³»çµ±
1. âœ… **Stats å±¬æ€§ç³»çµ±** - 15+ ç¨®å±¬æ€§,ä¸‰ç¨®åŠ æˆé¡å‹
2. âœ… **Element å…ƒç´ ç³»çµ±** - 8 å¤§å…ƒç´ ,å®Œæ•´å…‹åˆ¶è¡¨
3. âœ… **Combat æˆ°é¬¥ç³»çµ±** - å‚·å®³è¨ˆç®—ã€çˆ†æ“Šã€é–ƒé¿ã€ç©¿é€
4. âœ… **Skill æŠ€èƒ½ç³»çµ±** - æŠ€èƒ½æ¨¹ã€å†·å»ç®¡ç†ã€è·¨å…ƒç´ æ¶ˆè€—
5. âœ… **Talent å¤©è³¦ç³»çµ±** - ä¸»å±¬æ€§å°ˆå±¬å¤©è³¦ã€ä¸‰å¤§é¡å‹
6. âœ… **Companion çœ·å±¬ç³»çµ±** - SP æ©Ÿåˆ¶ã€é‡ç”Ÿç³»çµ±ã€æ•æ‰ç³»çµ±
7. âœ… **Item ç‰©å“ç³»çµ±** - 6 å¤§é¡å‹ã€6 ç¨®ç¨€æœ‰åº¦
8. âœ… **Equipment è£å‚™ç³»çµ±** - å¼·åŒ– +0~+9ã€å¥—è£åŠ æˆ
9. âœ… **Card å¡ç‰‡ç³»çµ±** - æ˜Ÿç´šã€èåˆã€çœŸå¯¦æ™‚é–“å†·å»
10. âœ… **Inventory èƒŒåŒ…ç³»çµ±** - 50-200 æ ¼ã€åˆ†é¡ã€æ“´å……
11. âœ… **Shop å•†åº—ç³»çµ±** - ä¸‰ç¨®å•†åº—ã€åˆ·æ–°æ©Ÿåˆ¶
12. âœ… **Level ç­‰ç´šç³»çµ±** - ç¶“é©—å€¼ã€å‡ç´šçå‹µ

#### ğŸ’¾ æœå‹™å±¤
- âœ… **CombatService** - æˆ°é¬¥æœå‹™
- âœ… **InventoryService** - èƒŒåŒ…æœå‹™
- âœ… **SaveService** - å­˜æª”æœå‹™ (å·²å®Œæˆåºåˆ—åŒ–æ¡†æ¶)

### å¾…å®ŒæˆåŠŸèƒ½ (2/14)

1. âš ï¸ **SaveService** - éœ€è¦æ•´åˆå„ç³»çµ±çš„åºåˆ—åŒ–é‚è¼¯
2. âŒ **Enemy Formation** - æ•µäººç·¨éšŠé…ç½®ç³»çµ±

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### ä¸‰å±¤æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation Layer (è¡¨ç¾å±¤)         â”‚
â”‚   PlayerController, UI, EnemyAI      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ èª¿ç”¨æœå‹™
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service Layer (æœå‹™å±¤)              â”‚
â”‚   ServiceLocator + EventBus          â”‚
â”‚   CombatService, InventoryService    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ æ“ä½œè³‡æ–™
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Layer (è³‡æ–™å±¤)                 â”‚
â”‚   ScriptableObject, Pure C# Classes  â”‚
â”‚   CharacterStats, SkillTree, etc.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®éŒ„çµæ§‹

```
Assets/Scripts/
â”œâ”€â”€ Core/                    # æ ¸å¿ƒæ¶æ§‹
â”‚   â”œâ”€â”€ ServiceLocator.cs   # æœå‹™å®šä½å™¨
â”‚   â”œâ”€â”€ EventBus.cs         # äº‹ä»¶ç¸½ç·š
â”‚   â”œâ”€â”€ GameEvents.cs       # é å®šç¾©äº‹ä»¶
â”‚   â”œâ”€â”€ ObjectPool.cs       # ç‰©ä»¶æ± 
â”‚   â”œâ”€â”€ StateMachine.cs     # ç‹€æ…‹æ©Ÿ
â”‚   â””â”€â”€ GameManager.cs      # éŠæˆ²ç®¡ç†å™¨(è‡ªå‹•å­˜æª”)
â”‚
â”œâ”€â”€ Services/                # æœå‹™å±¤
â”‚   â”œâ”€â”€ ICombatService.cs
â”‚   â”œâ”€â”€ CombatService.cs
â”‚   â”œâ”€â”€ IInventoryService.cs
â”‚   â”œâ”€â”€ InventoryService.cs
â”‚   â”œâ”€â”€ ISaveService.cs
â”‚   â”œâ”€â”€ SaveService.cs
â”‚   â”œâ”€â”€ SaveData.cs
â”‚   â”œâ”€â”€ ISkillService.cs
â”‚   â””â”€â”€ ICompanionService.cs
â”‚
â”œâ”€â”€ Stats/                   # å±¬æ€§ç³»çµ±
â”‚   â”œâ”€â”€ StatType.cs
â”‚   â”œâ”€â”€ StatModifier.cs
â”‚   â”œâ”€â”€ CharacterStats.cs
â”‚   â””â”€â”€ HealthSystem.cs
â”‚
â”œâ”€â”€ Element/                 # å…ƒç´ ç³»çµ±
â”‚   â”œâ”€â”€ ElementType.cs
â”‚   â””â”€â”€ ElementalAffinityTable.cs
â”‚
â”œâ”€â”€ Combat/                  # æˆ°é¬¥ç³»çµ±
â”‚   â”œâ”€â”€ CombatSystem.cs
â”‚   â”œâ”€â”€ DamageInfo.cs
â”‚   â”œâ”€â”€ SuperArmor.cs
â”‚   â”œâ”€â”€ CrowdControl.cs
â”‚   â””â”€â”€ DamageNumber.cs
â”‚
â”œâ”€â”€ Skill/                   # æŠ€èƒ½&å¤©è³¦
â”‚   â”œâ”€â”€ SkillData.cs
â”‚   â”œâ”€â”€ SkillInstance.cs
â”‚   â”œâ”€â”€ SkillTree.cs
â”‚   â”œâ”€â”€ SkillCastSystem.cs
â”‚   â”œâ”€â”€ TalentData.cs
â”‚   â”œâ”€â”€ TalentNode.cs
â”‚   â””â”€â”€ TalentTree.cs
â”‚
â”œâ”€â”€ Companion/               # çœ·å±¬ç³»çµ±
â”‚   â”œâ”€â”€ CompanionData.cs
â”‚   â”œâ”€â”€ CompanionInstance.cs
â”‚   â”œâ”€â”€ CompanionManager.cs
â”‚   â”œâ”€â”€ CompanionCaptureSystem.cs
â”‚   â””â”€â”€ CompanionRarity.cs
â”‚
â”œâ”€â”€ Item/                    # ç‰©å“ç³»çµ±
â”‚   â”œâ”€â”€ ItemType.cs
â”‚   â”œâ”€â”€ ItemData.cs
â”‚   â”œâ”€â”€ EquipmentData.cs
â”‚   â”œâ”€â”€ EquipmentInstance.cs
â”‚   â”œâ”€â”€ CardData.cs
â”‚   â””â”€â”€ CardInstance.cs
â”‚
â”œâ”€â”€ Inventory/               # èƒŒåŒ…ç³»çµ±
â”‚   â””â”€â”€ InventorySystem.cs
â”‚
â”œâ”€â”€ Shop/                    # å•†åº—ç³»çµ±
â”‚   â””â”€â”€ ShopSystem.cs
â”‚
â”œâ”€â”€ Level/                   # ç­‰ç´šç³»çµ±
â”‚   â””â”€â”€ PlayerLevel.cs
â”‚
â”œâ”€â”€ Player/                  # ç©å®¶æ§åˆ¶
â”‚   â”œâ”€â”€ PlayerController.cs
â”‚   â””â”€â”€ PlayerMovement.cs
â”‚
â””â”€â”€ AI/                      # AI ç³»çµ±
    â”œâ”€â”€ EnemyController.cs
    â””â”€â”€ EnemyStates.cs
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Unity 2022.3 æˆ–æ›´é«˜ç‰ˆæœ¬
- .NET Standard 2.1
- Input System Package (æ–°ç‰ˆè¼¸å…¥ç³»çµ±)

### åˆå§‹åŒ–æ­¥é©Ÿ

1. **å ´æ™¯è¨­ç½®**

```csharp
// 1. å‰µå»ºç©ºç‰©ä»¶ "GameServices"
// 2. æ›è¼‰ GameServices.cs çµ„ä»¶
// 3. è‡ªå‹•è¨»å†Šæ‰€æœ‰æœå‹™
```

2. **å‰µå»ºç©å®¶**

```csharp
// 1. å‰µå»ºç©å®¶ç‰©ä»¶
// 2. æ›è¼‰ PlayerController.cs
// 3. é…ç½®åˆå§‹å±¬æ€§
```

3. **ä½¿ç”¨æœå‹™**

```csharp
// ç²å–æˆ°é¬¥æœå‹™
var combatService = ServiceLocator.Get<ICombatService>();

// æ”»æ“Šæ•µäºº
DamageInfo damage = combatService.CalculateDamage(
    playerStats,
    enemyStats,
    100f,  // åŸºç¤å‚·å®³
    DamageType.Physical
);
```

### åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹

#### å±¬æ€§ç³»çµ±

```csharp
// å‰µå»ºè§’è‰²å±¬æ€§
CharacterStats stats = new CharacterStats();
stats.SetBaseValue(StatType.HP, 100f);
stats.SetBaseValue(StatType.ATK, 20f);

// æ·»åŠ è£å‚™åŠ æˆ
var swordBonus = new StatModifier(
    StatType.ATK,
    ModifierType.Flat,
    15f,
    "iron_sword"
);
stats.AddModifier(swordBonus);

// å–å¾—æœ€çµ‚å±¬æ€§
float finalATK = stats.GetFinalValue(StatType.ATK); // 35
```

#### æˆ°é¬¥ç³»çµ±

```csharp
// å‰µå»ºæˆ°é¬¥ç³»çµ±
CombatSystem combat = new CombatSystem(attackerStats, attackerHealth);
combat.Element = ElementType.Fire;

// æ”»æ“Šç›®æ¨™
DamageInfo damageInfo = combat.Attack(
    targetHealth,
    targetStats,
    baseDamage: 100f,
    damageType: DamageType.Magical,
    skillMultiplier: 1.5f
);

// æª¢æŸ¥çµæœ
if (damageInfo.isCritical) Debug.Log("æš´æ“Š!");
Debug.Log($"é€ æˆ {damageInfo.finalDamage} é»å‚·å®³");
```

#### çœ·å±¬ç³»çµ±

```csharp
// æ•æ‰çœ·å±¬
CaptureResult result = CompanionCaptureSystem.AttemptCapture(
    companionData,
    targetLevel: 5,
    targetHealth,
    targetStats,
    playerLevel: 10,
    netQuality: CaptureNetQuality.Good
);

if (result.success)
{
    // æ–°å¢åˆ°ç®¡ç†å™¨
    companionManager.AddCompanion(result.capturedCompanion);
    
    // éƒ¨ç½²çœ·å±¬
    companionManager.DeployCompanion(result.capturedCompanion);
}
```

#### å­˜æª”ç³»çµ±

```csharp
// ç²å–å­˜æª”æœå‹™
var saveService = ServiceLocator.Get<ISaveService>();

// å­˜æª”
saveService.SaveGame(0);  // å­˜åˆ°æ§½ä½ 0

// è®€æª”
if (saveService.LoadGame(0))
{
    Debug.Log("è¼‰å…¥æˆåŠŸ!");
}

// è‡ªå‹•å­˜æª”ç”± GameManager è‡ªå‹•è™•ç†
// - æ‡‰ç”¨ç¨‹å¼æš«åœæ™‚
// - æ‡‰ç”¨ç¨‹å¼å¤±ç„¦æ™‚
// - æ‡‰ç”¨ç¨‹å¼é€€å‡ºæ™‚
// - å®šæ™‚è‡ªå‹•å­˜æª”(é è¨­ 5 åˆ†é˜)
```

---

## ğŸ¯ éŠæˆ²ç³»çµ±è©³è§£

### 1. å±¬æ€§ç³»çµ± (Stats)

#### å±¬æ€§åˆ†é¡

**ä¸»è¦å±¬æ€§** (å¯å‡ç´šåˆ†é…):
- **HP** - ç”Ÿå‘½å€¼
- **MP** - é­”åŠ›å€¼
- **ATK** - ç‰©ç†æ”»æ“ŠåŠ›
- **Magic** - é­”æ³•åŠ›é‡
- **DEF** - é˜²ç¦¦åŠ›
- **SPD** - ç§»å‹•é€Ÿåº¦
- **SP** - ç²¾ç¥åŠ› (çœ·å±¬ç³»çµ±å°ˆç”¨)

**ç¨€æœ‰å±¬æ€§** (è£å‚™/Buff ç²å¾—):
- **CritRate** - çˆ†æ“Šç‡ (0-100%)
- **CritDamage** - çˆ†æ“Šå‚·å®³ (100-300%)
- **DodgeRate** - é–ƒé¿ç‡ (0-100%)
- **Toughness** - éŸŒæ€§ (é™ä½æ§å ´å‘½ä¸­ç‡)
- **Penetration** - ç©¿é€ (ç„¡è¦–é˜²ç¦¦)
- **SkillHaste** - æŠ€èƒ½æ€¥é€Ÿ (0-40%)
- **HitRate** - å‘½ä¸­ç‡ (0-100%)

#### ä¿®é£¾å™¨é¡å‹

- **Flat** - å›ºå®šæ•¸å€¼ (+10 æ”»æ“Š)
- **Percentage** - ç™¾åˆ†æ¯” (+15% HP)
- **Final** - æœ€çµ‚å€¼ (+10% æœ€çµ‚å‚·å®³)

### 2. å…ƒç´ ç³»çµ± (Element)

#### 8 å¤§å…ƒç´ 

**åŸºç¤å››å…ƒç´ **:
- **Fire** (ç«) - å…‹é¢¨ 160%, è¢«æ°´å…‹ 80%
- **Water** (æ°´) - å…‹ç« 140%, è¢«åœ°å…‹ 75%
- **Earth** (åœ°) - å…‹æ°´ 130%, è¢«é¢¨å…‹ 85%
- **Wind** (é¢¨) - å…‹åœ° 145%, è¢«ç«å…‹ 90%

**ç‰¹æ®Šå…ƒç´ **:
- **None** (ç„¡) - å°æ‰€æœ‰å…ƒç´  80%
- **Light** (å…‰) - å°é—‡ 200%, è¢«é—‡ 50%
- **Dark** (é—‡) - å°åŸºç¤å…ƒç´  120%, å°å…‰ 50%
- **Divine** (ç¥) - å°æ‰€æœ‰å…ƒç´  150% (æœ€å¼·)

### 3. æˆ°é¬¥ç³»çµ± (Combat)

#### å‚·å®³è¨ˆç®—æµç¨‹

```
1. å‘½ä¸­åˆ¤å®š (æ”»æ“Šè€…å‘½ä¸­ç‡ vs ç›®æ¨™é–ƒé¿ç‡)
2. é–ƒé¿åˆ¤å®š (å¦‚æœå‘½ä¸­)
3. è¨ˆç®—åŸºç¤å‚·å®³
   - ç‰©ç†: ATK Ã— æŠ€èƒ½å€ç‡
   - é­”æ³•: Magic Ã— æŠ€èƒ½å€ç‡
   - çœŸå¯¦: ç›´æ¥å‚·å®³
4. çˆ†æ“Šåˆ¤å®š (çˆ†æ“Šç‡ - ç›®æ¨™éŸŒæ€§)
5. å…ƒç´ å…‹åˆ¶ (åƒ…é­”æ³•å‚·å®³)
6. é˜²ç¦¦æ¸›å… (æœ‰æ•ˆé˜²ç¦¦ = DEF - ç©¿é€)
7. éœ¸é«”æ¸›å‚· (å¦‚æœæœ‰)
```

#### æ§å ´æ•ˆæœ (CC)

- **Stun** - æšˆçœ© (ç„¡æ³•è¡Œå‹•)
- **Freeze** - å†°å‡ (ç„¡æ³•ç§»å‹•å’Œæ”»æ“Š)
- **Slow** - æ¸›é€Ÿ
- **Silence** - æ²‰é»˜ (ç„¡æ³•æ–½æ³•)
- **Root** - å®šèº«
- **Knockback** - æ“Šé£›
- **Knockdown** - æ“Šå€’

#### éœ¸é«”ç³»çµ±

- å…ç–«æ‰€æœ‰æ§å ´æ•ˆæœ
- é«˜é¡å‚·å®³æ¸›å…
- éœ¸é«”å€¼å¯è¢«æ¶ˆè€—
- ç ´å£å¾Œé€²å…¥æšˆçœ©ç‹€æ…‹

### 4. çœ·å±¬ç³»çµ± (Companion)

#### ç¨€æœ‰åº¦ç­‰ç´š

- **Common** (æ™®é€š) - é‡ç”Ÿ 10 ç§’
- **Elite** (ç²¾è‹±) - é‡ç”Ÿ 20 ç§’
- **Rare** (ç¨€æœ‰) - é‡ç”Ÿ 40 ç§’
- **Legendary** (å‚³èªª) - é‡ç”Ÿ 60 ç§’

#### SP (ç²¾ç¥åŠ›) æ©Ÿåˆ¶

```
é‡ç”Ÿæ™‚é–“å…¬å¼:
åŸºç¤æ™‚é–“ Ã— (2.0 - 1.0 Ã— SP%) Ã— (1 Â± 10% éš¨æ©Ÿ)

ç¯„ä¾‹:
- ç¨€æœ‰çœ·å±¬ (40ç§’)
- SP 50%: 40 Ã— 1.5 = 60 ç§’
- SP 0%:  40 Ã— 2.0 = 80 ç§’
- SP 100%: 40 Ã— 1.0 = 40 ç§’
```

#### æ•æ‰ç³»çµ±

```
æ•æ‰ç‡ =
  åŸºç¤æ•æ‰ç‡
  + (1 - HP%) Ã— 50%
  + (1 - SP%) Ã— 30%
  + ç­‰ç´šå·® Ã— 2%
  + ç¶²å­å“è³ªåŠ æˆ
  + æŠ€èƒ½åŠ æˆ

é™åˆ¶: 5% ~ 95%
```

### 5. æŠ€èƒ½ç³»çµ± (Skill)

#### æŠ€èƒ½æ¨¹æ©Ÿåˆ¶

- æ¯å€‹å…ƒç´  20 å€‹æŠ€èƒ½
- è·¨å…ƒç´ å­¸ç¿’æ¶ˆè€—é›™å€æŠ€èƒ½é»
- æŠ€èƒ½ç­‰ç´š 1-5 ç´š
- æ”¯æ´å‰ç½®æŠ€èƒ½éœ€æ±‚

#### æŠ€èƒ½é¡å‹

- **ä¸»å‹•æŠ€èƒ½** - æ¶ˆè€— MPã€é€ æˆå‚·å®³/æ²»ç™‚
- **è¢«å‹•æŠ€èƒ½** - æ°¸ä¹…å±¬æ€§åŠ æˆ
- **æ§å ´æŠ€èƒ½** - æ–½åŠ  CC æ•ˆæœ
- **Buff æŠ€èƒ½** - å¢å¼·å‹è»

### 6. å¤©è³¦ç³»çµ± (Talent)

#### å¤©è³¦é¡å‹

- **è¢«å‹•å±¬æ€§** - æ°¸ä¹…å¢åŠ å±¬æ€§
- **æŠ€èƒ½å¼·åŒ–** - å¢å¼·ç‰¹å®šæŠ€èƒ½
- **ç‰¹æ®Šæ©Ÿåˆ¶** - è§£é–ç¨ç‰¹æ©Ÿåˆ¶

#### é™åˆ¶

- ä¸»å…ƒç´ å°ˆå±¬ (åªèƒ½å­¸ç¿’ä¸»å±¬æ€§å¤©è³¦)
- éœ€è¦å‰ç½®å¤©è³¦
- éœ€è¦è§’è‰²ç­‰ç´š
- æ›´æ›ä¸»å±¬æ€§æ™‚é‡ç½®

### 7. ç‰©å“ç³»çµ± (Item)

#### ç‰©å“é¡å‹

- **Consumable** - æ¶ˆè€—å“ (è—¥æ°´ã€é£Ÿç‰©)
- **Equipment** - è£å‚™ (æ­¦å™¨ã€é˜²å…·)
- **Item** - ä¸€èˆ¬ç‰©å“
- **Material** - ææ–™
- **QuestItem** - ä»»å‹™é“å…·
- **Card** - å¡ç‰‡

#### ç¨€æœ‰åº¦

- Common (ç°) â†’ Uncommon (ç¶ ) â†’ Rare (è—) â†’ Epic (ç´«) â†’ Legendary (æ©™) â†’ Mythic (ç´…)

### 8. è£å‚™ç³»çµ± (Equipment)

#### è£å‚™æ§½ä½

- **Weapon** - æ­¦å™¨
- **Head** - é ­éƒ¨
- **Chest** - èƒ¸ç”²
- **Shoes** - é‹å­
- **Accessory** - é£¾å“

#### å¼·åŒ–ç³»çµ±

- å¼·åŒ–ç­‰ç´š: +0 åˆ° +9
- éš±è—å±¬æ€§è§£é–: +3, +6, +9
- å¼·åŒ–å¤±æ•—é™ä½è€ä¹…
- å¥—è£åŠ æˆ (2/4/6 ä»¶)

### 9. å­˜æª”ç³»çµ± (Save)

#### åŠŸèƒ½ç‰¹è‰²

- âœ… Base64 åŠ å¯†å­˜æª”
- âœ… ä¸»æª”æ¡ˆ + å‚™ä»½æ©Ÿåˆ¶
- âœ… å­˜æª”ç‰ˆæœ¬æ§åˆ¶
- âœ… å¤šæ§½ä½æ”¯æ´ (é è¨­ 3 å€‹)
- âœ… è‡ªå‹•å­˜æª”æ©Ÿåˆ¶

#### è‡ªå‹•å­˜æª”è§¸ç™¼

- æ‡‰ç”¨ç¨‹å¼æš«åœæ™‚
- æ‡‰ç”¨ç¨‹å¼å¤±ç„¦æ™‚
- æ‡‰ç”¨ç¨‹å¼é€€å‡ºæ™‚
- å®šæ™‚è‡ªå‹•å­˜æª” (å¯é…ç½®,é è¨­ 5 åˆ†é˜)

#### å­˜æª”å…§å®¹

- ç©å®¶ä½ç½®ã€å ´æ™¯ã€ç­‰ç´šã€ç¶“é©—
- è§’è‰²å±¬æ€§ (åŸºç¤å€¼ + ä¿®é£¾å™¨)
- è¡€é‡/é­”åŠ›ç‹€æ…‹
- èƒŒåŒ…è³‡æ–™ (å®¹é‡ + ç‰©å“)
- æŠ€èƒ½/å¤©è³¦è³‡æ–™
- çœ·å±¬è³‡æ–™
- éŠæˆ²é€²åº¦

---

## ğŸ’» é–‹ç™¼æŒ‡å—

### æ–°å¢éŠæˆ²å…§å®¹

#### å‰µå»ºçœ·å±¬

1. å³éµ â†’ Create â†’ Game â†’ Companion â†’ Companion Data
2. è¨­å®šå±¬æ€§ã€ç¨€æœ‰åº¦ã€å…ƒç´ ç­‰
3. åœ¨éŠæˆ²ä¸­ä½¿ç”¨ `CompanionCaptureSystem` æ•æ‰

#### å‰µå»ºæŠ€èƒ½

1. å³éµ â†’ Create â†’ Game â†’ Skill â†’ Skill Data
2. è¨­å®šæŠ€èƒ½æ•ˆæœã€å†·å»ã€æ¶ˆè€—ç­‰
3. åŠ å…¥åˆ° SkillTree

#### å‰µå»ºè£å‚™

1. å³éµ â†’ Create â†’ Game â†’ Item â†’ Equipment Data
2. è¨­å®šå±¬æ€§åŠ æˆã€å¥—è£æ•ˆæœç­‰
3. é€é InventoryService æ·»åŠ åˆ°èƒŒåŒ…

### æ“´å±•æœå‹™å±¤

#### å‰µå»ºæ–°æœå‹™

```csharp
// 1. å®šç¾©ä»‹é¢
public interface IQuestService : IService
{
    void StartQuest(string questId);
    void CompleteQuest(string questId);
}

// 2. å¯¦ä½œæœå‹™
public class QuestService : IQuestService
{
    public void Initialize() { }
    public void Shutdown() { }
    
    public void StartQuest(string questId)
    {
        // å¯¦ä½œé‚è¼¯
        EventBus.Publish(new QuestStartedEvent { QuestId = questId });
    }
}

// 3. è¨»å†Šæœå‹™ (åœ¨ GameServices.cs)
ServiceLocator.Register<IQuestService>(new QuestService());
```

### äº‹ä»¶ç³»çµ±ä½¿ç”¨

#### å®šç¾©è‡ªè¨‚äº‹ä»¶

```csharp
public struct CustomEvent : IGameEvent
{
    public string Message;
    public int Value;
}
```

#### è¨‚é–±å’Œç™¼å¸ƒ

```csharp
// è¨‚é–±
EventBus.Subscribe<CustomEvent>(OnCustomEvent);

void OnCustomEvent(CustomEvent evt)
{
    Debug.Log($"æ”¶åˆ°äº‹ä»¶: {evt.Message}, å€¼: {evt.Value}");
}

// ç™¼å¸ƒ
EventBus.Publish(new CustomEvent
{
    Message = "æ¸¬è©¦",
    Value = 100
});

// å–æ¶ˆè¨‚é–± (é‡è¦!)
void OnDestroy()
{
    EventBus.Unsubscribe<CustomEvent>(OnCustomEvent);
}
```

### æ•ˆèƒ½å„ªåŒ–å»ºè­°

1. **ä½¿ç”¨ç‰©ä»¶æ± **
```csharp
// å‰µå»ºç‰©ä»¶æ± 
ObjectPool<GameObject> bulletPool = new ObjectPool<GameObject>(
    () => Instantiate(bulletPrefab),
    bullet => bullet.SetActive(true),
    bullet => bullet.SetActive(false),
    maxSize: 100
);

// å–å¾—ç‰©ä»¶
GameObject bullet = bulletPool.Get();

// æ­¸é‚„ç‰©ä»¶
bulletPool.Release(bullet);
```

2. **äº‹ä»¶è¨‚é–±ç®¡ç†**
- æ°¸é åœ¨ OnDestroy ä¸­å–æ¶ˆè¨‚é–±
- é¿å… lambda è¡¨é”å¼è¨‚é–± (é›£ä»¥å–æ¶ˆè¨‚é–±)

3. **ScriptableObject ä½¿ç”¨**
- éŠæˆ²è³‡æ–™éƒ½ç”¨ ScriptableObject
- é¿å…åœ¨ MonoBehaviour ä¸­ç¡¬ç·¨ç¢¼æ•¸å€¼

---

## ğŸ“‹ æ›´æ–°æ—¥èªŒ

### [2025-10-04] - å­˜æª”ç³»çµ±å®Œæ•´å¯¦ä½œ

#### æ–°å¢
- âœ… å®Œæ•´çš„ SaveService å¯¦ä½œ (åŠ å¯†ã€å‚™ä»½ã€ç‰ˆæœ¬æ§åˆ¶)
- âœ… GameManager è‡ªå‹•å­˜æª”æ©Ÿåˆ¶
- âœ… SaveData è³‡æ–™çµæ§‹ (10+ å€‹åºåˆ—åŒ–é¡åˆ¥)
- âœ… InventorySystem.Clear() å’Œ SetCapacity() æ–¹æ³•
- âœ… ISkillService å’Œ ICompanionService ä»‹é¢å®šç¾©
- âœ… èƒŒåŒ…å®Œæ•´åºåˆ—åŒ–é‚è¼¯

#### ä¿®æ­£
- âœ… StatType å‘½åçµ±ä¸€ç‚º `Magic` (åŸ `INT`)
- âœ… CombatService æ–¹æ³•åç¨±ä¿®æ­£
- âœ… Unity API æ£„ç”¨è­¦å‘Šä¿®æ­£

#### æ–‡ä»¶
- âœ… CHANGELOG.md - è©³ç´°è®Šæ›´è¨˜éŒ„
- âœ… å­˜æª”ç³»çµ±ä½¿ç”¨èªªæ˜

### [2025-10-03] - æ ¸å¿ƒç³»çµ±é‡æ§‹

#### é‡æ§‹
- âœ… å¼•å…¥ ServiceLocator æ¶æ§‹
- âœ… å¼•å…¥ EventBus äº‹ä»¶ç³»çµ±
- âœ… é‡æ§‹æ‰€æœ‰æœå‹™å±¤
- âœ… æ•´åˆ ObjectPool å’Œ StateMachine

#### ç§»é™¤
- âŒ å†—é¤˜çš„ Player.cs (åˆä½µåˆ° PlayerController)
- âŒ èˆŠç‰ˆ SaveSystem (æ”¹ç‚º SaveService)

---

## ğŸ“ å¾…æ•´ç†é …ç›®

### éœ€è¦ç¢ºèªçš„è¨­è¨ˆæ±ºç­–

1. **éœ¸é«”æ¸›å‚·æ•¸å€¼** 
   - å•é¡Œ: SuperArmor çš„ç‰©ç†/é­”æ³•æ¸›å‚·ç™¾åˆ†æ¯”æœªç¢ºå®š
   - å»ºè­°å€¼: ç‰©ç†æ¸›å‚· 30%, é­”æ³•æ¸›å‚· 20%?

2. **ç©¿é€å°éœ¸é«”çš„æ•ˆæœ**
   - å•é¡Œ: ç©¿é€å±¬æ€§æ˜¯å¦èƒ½é™ä½éœ¸é«”æ¸›å‚·?
   - é¸é … A: ç©¿é€åªå½±éŸ¿é˜²ç¦¦,ä¸å½±éŸ¿éœ¸é«”
   - é¸é … B: ç©¿é€åŒæ™‚é™ä½é˜²ç¦¦å’Œéœ¸é«”æ¸›å‚·

3. **è£å‚™å¼·åŒ–å¤±æ•—æ‡²ç½°**
   - å•é¡Œ: å¼·åŒ–å¤±æ•—æ™‚è€ä¹…é™ä½å¤šå°‘?
   - å»ºè­°: æ¯æ¬¡å¤±æ•—é™ä½ 10 é»è€ä¹…?

4. **å•†åº—åˆ·æ–°é€±æœŸ**
   - Fixed Shop: 24 å°æ™‚åˆ·æ–°?
   - Wandering Shop: 6 å°æ™‚åˆ·æ–°?
   - BlackMarket: 72 å°æ™‚åˆ·æ–°?

### éºç•™çš„ TODO é …ç›®

1. **SkillService å’Œ CompanionService å¯¦ä½œ**
   - ä»‹é¢å·²å®šç¾©,éœ€è¦å¯¦ä½œå…·é«”é¡åˆ¥
   - è¨»å†Šåˆ° ServiceLocator

2. **å­˜æª”ç³»çµ±ååºåˆ—åŒ–**
   - ApplySkills() - æ¢å¾©å·²å­¸ç¿’æŠ€èƒ½
   - ApplyCompanions() - æ¢å¾©çœ·å±¬è³‡æ–™
   - ApplyInventory() - æ¢å¾©èƒŒåŒ…ç‰©å“ (éƒ¨åˆ†å®Œæˆ)

3. **ä»»å‹™ç³»çµ±æ•´åˆ**
   - ProgressData å·²åŒ…å«ä»»å‹™æ¬„ä½
   - éœ€è¦å¯¦éš›çš„ä»»å‹™ç³»çµ±

4. **Enemy Formation ç³»çµ±**
   - EnemyController åŸºç¤å®Œæˆ
   - éœ€è¦ç·¨éšŠé…ç½® ScriptableObject
   - éœ€è¦å‹•æ…‹ç”Ÿæˆé‚è¼¯

### æ–‡ä»¶æ•´ç†å»ºè­°

ä»¥ä¸‹èˆŠæ–‡ä»¶å¯èƒ½éœ€è¦æ•´ä½µæˆ–åˆªé™¤:
- `README.md` (èˆŠç‰ˆ,å…§å®¹éæ™‚)
- `BUGFIX_REPORT.md` (å·²ä¿®å¾©,å¯æ­¸æª”)
- `SYSTEM_ARCHITECTURE.md` èˆ‡ `ARCHITECTURE.md` å…§å®¹é‡è¤‡

å»ºè­°ä¿ç•™:
- æœ¬ README.md (æ•´åˆç‰ˆ)
- CHANGELOG.md (ç‰ˆæœ¬è¨˜éŒ„)
- SAVE_SYSTEM_README.md (å­˜æª”ç³»çµ±è©³ç´°èªªæ˜)

---

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆç‚ºå€‹äººå­¸ç¿’å°ˆæ¡ˆã€‚

---

**æœ€å¾Œæ›´æ–°**: 2025-10-04  
**ç¶­è­·è€…**: GitHub Copilot  
**ç‰ˆæœ¬**: 2.0
